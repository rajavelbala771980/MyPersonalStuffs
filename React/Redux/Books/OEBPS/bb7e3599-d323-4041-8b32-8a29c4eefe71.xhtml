<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2002/06/xhtml2/ http://www.w3.org/MarkUp/SCHEMA/xhtml2.xsd" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<link href="Styles/Style00.css" rel="stylesheet" type="text/css" />
<link href="Styles/Style01.css" rel="stylesheet" type="text/css" />
<link href="Styles/Style02.css" rel="stylesheet" type="text/css" />
<link href="Styles/Style03.css" rel="stylesheet" type="text/css" />
<style type="text/css" title="ibis-book">
    #sbo-rt-content .chapter-number{font-weight:bold;font-size:8.3em;text-align:right;font-family:symbol}#sbo-rt-content .chapter-title{font-size:30pt;text-align:right}#sbo-rt-content h1,#sbo-rt-content .packt_head1{font-size:16pt;font-weight:bold}#sbo-rt-content h2,#sbo-rt-content .packt_head2{font-size:14pt;font-weight:bold}#sbo-rt-content h3,#sbo-rt-content .packt_head3{font-size:13pt;font-weight:bold}#sbo-rt-content h4,#sbo-rt-content .packt_head4{font-size:11pt;font-weight:normal;font-style:italic}#sbo-rt-content ul,#sbo-rt-content .packt_bullet{font-weight:normal;list-style-type:disc}#sbo-rt-content ol,#sbo-rt-content .packt_numbered{font-weight:normal}#sbo-rt-content .packt_normal{font-weight:normal}#sbo-rt-content code,#sbo-rt-content .packt_code,#sbo-rt-content .packt_codeblock,#sbo-rt-content pre{font-family:monospace;font-size:9pt;font-weight:normal;border-left:1px solid black;margin-left:20px;padding-left:5px;display:block;margin-bottom:.12in}#sbo-rt-content .packt_figref{font-size:10pt;font-weight:normal}#sbo-rt-content q,#sbo-rt-content .packt_quote{font-size:11pt;font-weight:normal;color:black;font-style:italic}#sbo-rt-content .packt_tip{font-size:11pt;font-weight:normal;color:black;font-style:italic;background-image:url(../assets/cfea789e-9199-4571-ab96-30413ef8104e.png);background-position:left center;background-repeat:no-repeat;background-size:.6in;margin-left:20px;margin-right:20px;padding-left:.7in;min-height:.75in;}#sbo-rt-content .packt_infobox{font-size:11pt;font-weight:normal;color:black;font-style:italic;background-image:url(../assets/5a771380-02eb-4759-8e38-030f17f643b4.png);background-position:left center;background-repeat:no-repeat;background-size:.6in;margin-left:20px;margin-right:20px;padding-left:.7in;min-height:.75in;}#sbo-rt-content kbd,#sbo-rt-content .packt_action{font-family:monospace;font-size:9pt;font-weight:normal}#sbo-rt-content .packt_italics{font-size:11pt;font-weight:normal;color:black;font-style:italic}#sbo-rt-content a,#sbo-rt-content .packt_url{font-family:monospace;font-size:9pt;font-weight:normal;text-decoration:none;word-break:break-all}#sbo-rt-content var,#sbo-rt-content .packt_inlinemsgid{display:none}#sbo-rt-content p,#sbo-rt-content .packt_para{text-align:left;font-size:11pt;line-height:17px}#sbo-rt-content .underline{text-decoration:underline}#sbo-rt-content .CDPImageAlign{width:100%;display:block}#sbo-rt-content div.CDPAlign,#sbo-rt-content p.CDPAlign{width:100%;display:block;margin-top:.18in;margin-bottom:.18in}#sbo-rt-content .CDPAlignCenter{text-align:center}#sbo-rt-content .CDPAlignLeft{text-align:left}#sbo-rt-content .CDPAlignRight{text-align:right}#sbo-rt-content .fm-editor-equation{border:none}#sbo-rt-content nav a.section{border-bottom:1px solid black;width:100%;display:block}#sbo-rt-content body table{border-collapse:collapse}#sbo-rt-content body table td{border:1px solid black;padding:.31em .62em}#sbo-rt-content .header-title{font-size:2.5em}#sbo-rt-content img.inline-image{height:1em}#sbo-rt-content .chapter-title{font-size:2.5em}#sbo-rt-content h1,#sbo-rt-content .packt_head1{font-size:2em}#sbo-rt-content h2,#sbo-rt-content .packt_head2{font-size:1.5em}#sbo-rt-content h3,#sbo-rt-content .packt_head3{font-size:1.17em}#sbo-rt-content h4,#sbo-rt-content .packt_head4{font-size:1em}#sbo-rt-content code,#sbo-rt-content .packt_code,#sbo-rt-content .packt_codeblock,#sbo-rt-content pre{font-size:.8em;margin-left:1.25em;padding-left:.3em;margin-bottom:.01em}#sbo-rt-content .packt_figref{font-size:.62em}#sbo-rt-content q,#sbo-rt-content .packt_quote{font-size:.68em}#sbo-rt-content .packt_tip{font-size:.68em;background-size:2.5em;margin-left:1.25em;margin-right:1.25em;padding-left:3em;min-height:2.5em}#sbo-rt-content .packt_infobox{font-size:.68em;background-size:2.5em;margin-left:1.25em;margin-right:1.25em;padding-left:3em;min-height:2.5em}#sbo-rt-content kbd,#sbo-rt-content .packt_action{font-size:.75em}#sbo-rt-content .packt_italics{font-size:.9em}#sbo-rt-content a,#sbo-rt-content .packt_url{font-size:.7em}#sbo-rt-content p,#sbo-rt-content .packt_para{font-size:1em;line-height:1.06em}#sbo-rt-content .CDPImageAlign{max-width:100%;max-height:100%}#sbo-rt-content div.CDPAlign,#sbo-rt-content p.CDPAlign{margin-top:.01em;margin-bottom:.01em}
    </style>
<style type="text/css" id="font-styles">#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }</style>
<style type="text/css" id="font-family">#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }</style>
<style type="text/css" id="column-width">#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }</style>

<style type="text/css">body{margin:1em;}#sbo-rt-content *{text-indent:0pt!important;}#sbo-rt-content .bq{margin-right:1em!important;}</style></head>
<body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Replacing the hot module</h1>
                </header>
            
            <article>
                
<p>This is one of the most useful features provided by webpack. Although our project is already configured and enabled with this feature, in this section we are going to walk through it. We are using <kbd>webpack-hot-middleware</kbd> as it allows us to add hot reloading into an existing server (<a href="https://github.com/webpack-contrib/webpack-hot-middleware">https://github.com/webpack-contrib/webpack-hot-middleware</a>). To configure it, follow these steps:</p>
<ol>
<li class="mce-root"><span>Install the</span> <kbd>npm</kbd> <span>module:</span></li>
</ol>
<div style="color: black;font-size: 1em" class="highlight highlight-source-shell">
<pre style="padding-left: 60px"><strong>yarn add webpack-hot-middleware --dev --exact</strong><br/>or<br/><strong>npm install --save-dev webpack-hot-middleware</strong></pre></div>
<ol start="2">
<li class="mce-root"><span>Enable hot reloading in the webpack configuration file. If you check the</span> <kbd>webpack/webpack.dev.babel.js</kbd> <span>file, you will see the configuration inside the <kbd>plugins</kbd> array:</span></li>
</ol>
<pre style="color: black;padding-left: 60px">plugins: [<br/>    <strong>new webpack.HotModuleReplacementPlugin(),</strong><br/>    new HtmlWebpackPlugin({<br/>      inject: true,<br/>      template: 'app/index.html',<br/>    }),<br/>    new CircularDependencyPlugin({<br/>      exclude: /a\.js|node_modules/,<br/>      failOnError: false,<br/>    }),<br/>  ],</pre>
<ol start="3">
<li class="mce-root"><span>Add</span> <kbd>webpack-hot-middleware/client</kbd> <span>into the <kbd>entry</kbd> array in the same webpack configuration file: </span></li>
</ol>
<pre style="color: black;padding-left: 90px">entry: [<br/>    require.resolve('react-app-polyfill/ie11'),<br/>    'webpack-hot-middleware/client?reload=true',<br/>    path.join(process.cwd(), 'app/app.js'), <br/>  ],</pre>
<ol start="4">
<li>Add <kbd>webpack-dev-middleware</kbd> to the server. Open <kbd>CH07/server/middlewares/addDevMiddlewares.js</kbd>:</li>
</ol>
<pre style="color: black;padding-left: 60px">const path = require('path');<br/>const webpack = require('webpack');<br/><strong>const webpackDevMiddleware = require('webpack-dev-middleware');</strong><br/><strong>const webpackHotMiddleware = require('webpack-hot-middleware');</strong><br/><br/>function createWebpackMiddleware(compiler, publicPath) {<br/>  return webpackDevMiddleware(compiler, {<br/>    logLevel: 'warn',<br/>    publicPath,<br/>    silent: true,<br/>    stats: 'errors-only',<br/>  });<br/>}<br/><br/>module.exports = function addDevMiddlewares(app, webpackConfig) {<br/>  const compiler = webpack(webpackConfig);<br/>  const middleware = createWebpackMiddleware(<br/>    compiler,<br/>    webpackConfig.output.publicPath,<br/>  );<br/><br/>  <strong>app.use(middleware);</strong><br/><strong>  app.use(webpackHotMiddleware(compiler));</strong><br/><br/>  const fs = middleware.fileSystem;<br/><br/>  app.get('*', (req, res) =&gt; {<br/>    fs.readFile(path.join(compiler.outputPath, 'index.html'), (err, file) =&gt; {<br/>      if (err) {<br/>        res.sendStatus(404);<br/>      } else {<br/>        res.send(file.toString());<br/>      }<br/>    });<br/>  });<br/>};</pre>
<p>That should be all. Now you know how replacing the hot module really works in our application. </p>


            </article>

            
        </section>
    </div>



  </body>
</html>